import '@fontsource/syne';
import React, { useEffect } from "react";
import { COLOR_PRESETS, SETTINGS } from '../commons'
import { Freebsd } from '../icons'

export const handler = ({ inputs, mechanic }) => {
  const { color, text_color, accent, title, version, claim, punchline, link, logo, freebsd } = inputs;

  useEffect(() => {
    mechanic.done();
  }, []);

  return (
    <svg width={1200} height={675} fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill={color} d="M0 0h1200v675H0z" />
      <g fill={text_color} fontFamily="Syne">
        <text xmlSpace="preserve" style={{ whiteSpace: "pre", }} fontSize={96} letterSpacing="0em" >
          <tspan x={91} y={212.6}>
            {title}
          </tspan>
        </text>
        <text xmlSpace="preserve" style={{ whiteSpace: "pre", }}
          fontSize={40}
          fontWeight={500}
          letterSpacing="-.02em"
        >
          <tspan x={91} y={263}>
            {version}
          </tspan>
        </text>
      </g>
      <text
        fill={accent}
        xmlSpace="preserve"
        style={{ whiteSpace: "pre", }}
        fontFamily="Syne"
        fontSize={40}
        letterSpacing="-.02em"
      >
        <tspan x={91} y={332}>
          {claim}
        </tspan>
        <tspan x={91} y={380}>
          {punchline}
        </tspan>
      </text>
      <text
        fill={accent}
        xmlSpace="preserve"
        style={{
          whiteSpace: "pre",
        }}
        fontFamily="Syne"
        fontSize={36}
        letterSpacing="-.02em"
      >
        <tspan x={91.95} y={444.1}>
          {link}
        </tspan>
      </text>
      <g stroke={accent} strokeWidth={4}>
        {freebsd && <Freebsd />}
        <path d="M707.417 494.25h-20.834c-1.15 0-2.083.933-2.083 2.083v33.334c0 1.15.933 2.083 2.083 2.083h20.834c1.15 0 2.083-.933 2.083-2.083v-33.334c0-1.15-.933-2.083-2.083-2.083Z" />
        <path
          d="M684.5 500.5h-6.25m6.25 8.333h-6.25m6.25 8.334h-6.25m6.25 8.333h-6.25m37.5-25h-6.25m6.25 8.333h-6.25m6.25 8.334h-6.25m6.25 8.333h-6.25"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
      </g>
      <g fill={text_color}>
        <path d="M1041.85 502.743v34.63h-3.57c-.2-2.276-.3-3.908-.3-4.898v-2.671a12.873 12.873 0 0 1-2.8 5.788c-1.34 1.517-3.18 2.276-5.52 2.276a9.389 9.389 0 0 1-5.41-1.658 11.426 11.426 0 0 1-3.84-4.576 14.95 14.95 0 0 1-1.41-6.58c-.03-2.274.43-4.528 1.36-6.604a11.303 11.303 0 0 1 3.8-4.626 9.448 9.448 0 0 1 5.5-1.682c2.44 0 4.32.619 5.62 1.855 1.31 1.237 2.21 2.977 2.7 5.22v-16.474h3.87Zm-5.75 28.817c1.25-1.695 1.88-3.864 1.88-6.506 0-2.8-.63-5.026-1.88-6.678-1.26-1.653-3.09-2.477-5.5-2.474-2.41 0-4.31.849-5.68 2.548-1.37 1.698-2.05 3.9-2.05 6.604-.03 1.614.31 3.212.99 4.675a7.745 7.745 0 0 0 2.75 3.216 7.032 7.032 0 0 0 3.96 1.163c2.45 0 4.3-.85 5.55-2.548h-.02ZM1069.6 512.637l-13.73 34.63h-4.06l4.46-10.24-9.47-24.39h4.12l7.28 19.591 7.28-19.591h4.12ZM1092.19 514.467c1.5 1.554 2.25 3.665 2.25 6.333v16.573h-3.86v-15.584c0-3.822-1.77-5.735-5.3-5.738a7.274 7.274 0 0 0-4.86 1.83 8.719 8.719 0 0 0-2.82 4.799v14.693h-3.87v-24.736h3.87v7.074a10.56 10.56 0 0 1 3.12-5.516 7.683 7.683 0 0 1 5.3-2.053c2.6 0 4.65.775 6.17 2.325ZM1121.8 529.457a10.006 10.006 0 0 1-3.42 6.036 10.244 10.244 0 0 1-6.89 2.375 11.69 11.69 0 0 1-6.14-1.658 11.742 11.742 0 0 1-4.37-4.576 13.582 13.582 0 0 1-1.58-6.58c-.04-2.293.49-4.561 1.54-6.604a11.728 11.728 0 0 1 4.23-4.626 11.268 11.268 0 0 1 6.07-1.682c3.37 0 6 1.072 7.88 3.216 1.89 2.144 2.83 5.211 2.83 9.202 0 .663 0 1.157-.05 1.484h-18.64a9.085 9.085 0 0 0 2.66 5.813 7.529 7.529 0 0 0 2.55 1.694c.96.387 1.99.576 3.02.557a6.984 6.984 0 0 0 4.21-1.287 6.385 6.385 0 0 0 2.43-3.364h3.67Zm-15.53-11.799a8.946 8.946 0 0 0-2.75 4.675h14.47c-.17-2.044-.9-3.628-2.18-4.749a7.08 7.08 0 0 0-4.81-1.682 6.94 6.94 0 0 0-4.73 1.756ZM1128.07 537.373h-5.05v-4.799h5.05v4.799ZM1067.88 564.79a11.582 11.582 0 0 1-4.41-4.477 13.375 13.375 0 0 1-1.66-6.778c-.05-2.357.52-4.685 1.66-6.753a11.856 11.856 0 0 1 4.41-4.551 11.498 11.498 0 0 1 5.94-1.608c2.08-.01 4.12.546 5.9 1.608a11.784 11.784 0 0 1 4.36 4.551 13.71 13.71 0 0 1 1.64 6.753c.05 2.363-.52 4.698-1.64 6.778a11.502 11.502 0 0 1-4.36 4.477 11.686 11.686 0 0 1-5.9 1.558c-2.08.015-4.13-.523-5.94-1.558Zm9.81-3.29a8.223 8.223 0 0 0 3-3.141 9.875 9.875 0 0 0 1.14-4.824 9.972 9.972 0 0 0-1.14-4.848 8.305 8.305 0 0 0-3-3.191 7.461 7.461 0 0 0-3.89-1.113 7.618 7.618 0 0 0-3.96 1.088 8.12 8.12 0 0 0-3.03 3.191 9.85 9.85 0 0 0-1.16 4.873 9.657 9.657 0 0 0 1.16 4.824 8.24 8.24 0 0 0 3.03 3.141 7.667 7.667 0 0 0 3.96 1.089 7.645 7.645 0 0 0 3.89-1.089ZM1097.09 542.825c1.25-1.471 3.02-2.205 5.3-2.202v3.958c-2.31 0-4.09.742-5.32 2.226a12.561 12.561 0 0 0-2.56 4.749v11.577h-3.86v-22.015h3.86v6.728a11.985 11.985 0 0 1 2.58-5.021ZM1128.07 545.372c-2.05 0-4.3-.643-6.74-1.929 2.54 1.811 3.81 4.449 3.82 7.915a11.33 11.33 0 0 1-1.36 5.616 9.576 9.576 0 0 1-3.67 3.685 10.068 10.068 0 0 1-4.98 1.286c-1.45.019-2.89.218-4.29.594-.88.297-1.31.841-1.31 1.633-.01.236.03.472.13.687.1.215.25.404.44.549.5.334 1.1.491 1.71.446h5c2.81 0 5.07.61 6.79 1.83 1.72 1.22 2.58 3.216 2.58 5.986v.99c0 .292-.12.573-.33.78-.2.207-.48.323-.78.323h-2.76v-1.088c0-1.715-.45-2.985-1.36-3.81-.91-.824-2.27-1.237-4.09-1.237h-4.8c-2.16 0-3.76-.366-4.81-1.088a3.491 3.491 0 0 1-1.2-1.35 3.61 3.61 0 0 1-.39-1.767c-.04-.645.09-1.291.39-1.864.31-.573.76-1.049 1.32-1.376a7.228 7.228 0 0 1 4.09-.915 9.907 9.907 0 0 1-4.68-3.661 10.485 10.485 0 0 1-1.81-6.234c-.04-1.96.44-3.897 1.39-5.615a9.768 9.768 0 0 1 3.71-3.784 9.986 9.986 0 0 1 5.06-1.336 9.339 9.339 0 0 1 3.07.495l9.86-.05v4.289Zm-8.6 11.008c1.21-1.237 1.81-2.911 1.81-5.022a7.497 7.497 0 0 0-.86-3.685 6.415 6.415 0 0 0-2.26-2.414 5.705 5.705 0 0 0-3.02-.841 6.087 6.087 0 0 0-3.07.816 6.027 6.027 0 0 0-2.33 2.399 7.397 7.397 0 0 0-.9 3.711c0 2.107.62 3.781 1.86 5.021a6.073 6.073 0 0 0 4.44 1.855c.81.009 1.61-.149 2.35-.466a5.76 5.76 0 0 0 1.97-1.374h.01Z" />
        <path d="M1122.31 575.026c.01.666-.11 1.328-.37 1.943-.25.615-.63 1.17-1.12 1.629a5.37 5.37 0 0 1-3.78 1.566 5.375 5.375 0 0 1-3.79-1.542l-9.42-10.24-.02-.03-.03-.03a9.134 9.134 0 0 0-3.04-2.013 9.176 9.176 0 0 0-3.47-.668 9.213 9.213 0 0 0-3.47.668 9.148 9.148 0 0 0-3.03 2.013 9.252 9.252 0 0 0-2.02 3.033 9.33 9.33 0 0 0-.67 3.463c0 1.187.23 2.363.67 3.463a9.252 9.252 0 0 0 2.02 3.033 9.148 9.148 0 0 0 6.5 2.686 9.161 9.161 0 0 0 3.47-.673 9.119 9.119 0 0 0 3.04-2.013l.03-.03 2.15-2.34-2.6-2.8-2.3 2.513a5.375 5.375 0 0 1-3.79 1.542 5.351 5.351 0 0 1-5.35-5.361c0-1.423.56-2.788 1.57-3.795 1-1 2.36-1.564 3.78-1.569a5.369 5.369 0 0 1 3.79 1.54l9.42 10.24.06.06c.86.87 1.89 1.555 3.03 2.013 1.1.447 2.28.676 3.47.673a9.161 9.161 0 0 0 3.47-.673 9.119 9.119 0 0 0 3.04-2.013 9.277 9.277 0 0 0 2.01-3.033c.44-1.018.65-2.115.64-3.221-.05-1.226-3.89-1.469-3.89-.034ZM1021.33 494.204c.05.583.23 1.111.57 1.583.33.458.76.819 1.29 1.083a3.73 3.73 0 0 0 1.69.396c.75 0 1.35-.209 1.81-.625.47-.417.71-.951.71-1.604 0-.416-.11-.756-.31-1.02-.21-.278-.48-.5-.82-.667-.32-.18-.75-.367-1.31-.562-.01-.014-.16-.069-.44-.166a43.275 43.275 0 0 1-2.37-.979 4.64 4.64 0 0 1-1.48-1.166c-.43-.514-.65-1.167-.65-1.958 0-.68.17-1.298.5-1.853.35-.57.84-1.014 1.46-1.333.64-.333 1.38-.5 2.23-.5 1.31 0 2.33.396 3.06 1.187.74.778 1.09 1.819 1.07 3.124h-1.44c-.03-.93-.3-1.618-.81-2.062-.52-.458-1.17-.687-1.96-.687-.7 0-1.29.166-1.77.5-.48.333-.71.847-.71 1.541 0 .43.09.777.29 1.041.21.264.46.479.77.646.32.166.79.367 1.42.604l.81.312c.1.042.19.083.27.125.1.041.19.076.27.104.74.292 1.34.569 1.81.833.48.264.88.639 1.21 1.125.35.472.52 1.069.52 1.79 0 1.125-.34 2.034-1.04 2.729-.69.694-1.69 1.041-2.98 1.041-1.17 0-2.14-.243-2.92-.729-.76-.5-1.32-1.083-1.68-1.749-.36-.681-.54-1.278-.54-1.791 0-.098.01-.202.04-.313h1.43ZM1035.94 498.786a5.08 5.08 0 0 1-2.5-.646c-.77-.444-1.38-1.076-1.86-1.895-.46-.819-.68-1.77-.68-2.853 0-1.069.22-2.013.68-2.832.48-.833 1.09-1.472 1.86-1.916a4.848 4.848 0 0 1 2.5-.687c.89 0 1.71.229 2.48.687.76.444 1.37 1.083 1.83 1.916.46.819.69 1.763.69 2.832 0 1.083-.23 2.034-.69 2.853-.46.819-1.07 1.451-1.83 1.895-.77.431-1.59.646-2.48.646Zm0-1.583c.57 0 1.11-.153 1.62-.458.53-.305.95-.743 1.27-1.312.32-.583.48-1.263.48-2.041 0-.777-.16-1.458-.48-2.041-.32-.583-.74-1.027-1.27-1.333a3.006 3.006 0 0 0-1.62-.479c-.59 0-1.14.153-1.67.459-.51.305-.94.756-1.27 1.353-.32.583-.48 1.264-.48 2.041 0 .778.16 1.458.48 2.041.33.569.76 1.007 1.27 1.312.53.305 1.08.458 1.67.458ZM1047.63 485.645c-1.25-.028-1.87.597-1.87 1.874v.625h2.58v1.562h-2.58v8.872h-1.63v-8.872h-1.83v-1.562h1.83v-.604c0-1.194.31-2.082.94-2.665.64-.583 1.5-.875 2.58-.875h.9v1.645h-.92ZM1055.6 489.706h-2.21v8.872h-1.63v-8.872h-2.21v-1.541h2.21v-2.707h1.63v2.707h2.21v1.541ZM1071.85 488.165l-3.56 10.413h-1.52l-2.44-8.455-2.44 8.455h-1.52l-3.56-10.413h1.77l2.58 8.226 2.19-8.226h1.98l2.15 8.226 2.6-8.226h1.77ZM1082.61 488.165v10.413h-1.5c-.08-.958-.12-1.646-.12-2.062v-1.125c-.23.986-.62 1.798-1.19 2.437-.56.638-1.33.958-2.31.958-.81 0-1.56-.229-2.25-.687-.68-.472-1.23-1.118-1.63-1.937-.4-.819-.6-1.743-.6-2.77s.2-1.951.6-2.77c.42-.833.98-1.485 1.69-1.957a4.275 4.275 0 0 1 2.39-.708c.96 0 1.7.257 2.21.77.52.514.88 1.243 1.09 2.187v-2.749h1.62Zm-4.73 9.038c1.02 0 1.79-.354 2.31-1.062.53-.722.8-1.638.8-2.749 0-1.18-.27-2.11-.8-2.79-.52-.695-1.29-1.042-2.31-1.042-1.01 0-1.81.354-2.39 1.062-.57.708-.86 1.632-.86 2.77 0 .736.14 1.395.42 1.978.28.57.66 1.021 1.14 1.354.5.319 1.07.479 1.69.479ZM1087.13 490.997c.19-.791.56-1.492 1.08-2.103.53-.625 1.27-.937 2.23-.937v1.666c-.97 0-1.72.312-2.25.937-.51.625-.87 1.291-1.06 1.999v6.019h-1.62v-10.413h1.62v2.832ZM1101.23 495.246a4.19 4.19 0 0 1-1.44 2.54c-.77.667-1.74 1-2.89 1-.95 0-1.81-.229-2.59-.687a5.04 5.04 0 0 1-1.83-1.937c-.44-.819-.67-1.743-.67-2.77s.22-1.951.65-2.77c.43-.833 1.02-1.485 1.77-1.957.76-.472 1.62-.708 2.56-.708 1.42 0 2.52.451 3.32 1.353.79.903 1.18 2.194 1.18 3.874 0 .278 0 .486-.02.625h-7.83c.1.999.46 1.818 1.1 2.457.66.625 1.44.937 2.36.937.68 0 1.27-.18 1.77-.541.5-.361.84-.833 1.02-1.416h1.54Zm-4.54-5.707c-.76 0-1.43.25-2 .75-.56.486-.94 1.139-1.15 1.958h6.09c-.07-.861-.38-1.527-.92-1.999-.54-.473-1.22-.709-2.02-.709ZM1113.77 487.957c.85 0 1.61.236 2.3.708.68.472 1.21 1.124 1.6 1.957.39.819.58 1.743.58 2.77s-.2 1.951-.6 2.77c-.39.819-.93 1.465-1.63 1.937-.68.458-1.43.687-2.25.687-1 0-1.77-.32-2.33-.958-.56-.639-.95-1.451-1.17-2.437v1.125c0 .416-.05 1.104-.14 2.062h-1.48V484h1.62v6.935c.21-.944.59-1.673 1.13-2.187.55-.527 1.35-.791 2.37-.791Zm-.41 9.246c.62 0 1.18-.16 1.68-.479.5-.333.89-.784 1.17-1.354.28-.583.42-1.242.42-1.978 0-1.138-.29-2.062-.88-2.77-.58-.722-1.38-1.083-2.39-1.083-1 0-1.77.348-2.3 1.042-.52.694-.79 1.631-.79 2.811 0 1.111.27 2.027.79 2.749.53.708 1.3 1.062 2.3 1.062ZM1129 488.165l-5.77 14.578h-1.71l1.88-4.311-3.98-10.267h1.72l3.07 8.247 3.06-8.247h1.73Z" />
      </g>
      <text
        opacity={0.5}
        fill={accent}
        xmlSpace="preserve"
        style={{
          whiteSpace: "pre",
        }}
        fontFamily="Syne"
        fontSize={300}
        letterSpacing="0em"
      >
        <tspan x={836} y={377.5}>
          {"\xD8"}
        </tspan>
      </text>
    </svg>
  );
};

export const inputs = {
  title: { type: 'text', default: 'FreiÃ˜r' },
  version: { type: 'text', default: 'v3.0' },
  claim: { type: 'text', default: 'Cooler software of all time' },
  punchline: { type: 'text', default: 'The best one' },
  link: { type: 'text', default: 'https://link.com' },
  logo: { type: 'image' },
  freebsd: { type: 'boolean', default: false },
  color: { type: 'color', model: 'hex', default: '#FFEEDD', editable: false, },
  text_color: { type: 'color', model: 'hex', default: '#000000', editable: false, },
  secondary: { type: 'color', model: 'hex', default: '#F6D6B0', editable: false, },
  accent: { type: 'color', model: 'hex', default: '#F6D6B0', editable: false, },
};

export const presets = COLOR_PRESETS;
export const settings = SETTINGS;

export const ExtraUI = (props) => {
  const { values, onChange } = props;

  const clickHandler = (e) => {
    onChange(e, 'columns', Math.floor(Math.random() * 8));
  };

  return (
    <button onClick={clickHandler}>
      Randomize columns!
    </button>
  );
};